<v-layout
  class="flex-column justify-center"
  :class="{'fill-height': isLoading || isEmpty, 'align-center': isLoading || isEmpty }"
>
  <link rel="stylesheet" href="/modules/shared/components/data-table/data-table.css" />

  <atom-spinner
    :animation-duration="1000"
    :size="80"
    :color="'#64B5F6'"
    v-if="isLoading"
  ></atom-spinner>

  <template v-if="!isLoading && isEmpty">
    <slot name="empty-content">
      {{ $t('core.common.emptyTableMsg') }}
    </slot>
  </template>

  <v-data-table
    light
    class="elevation-1 rawcms-data-table"
    v-if="!isLoading && !isEmpty"
    :headers="headers"
    :items="items"
    @click:row="goTo($event)"
  >
    <template
      v-for="(header, index) in dataHeaders"
      :key="index"
      v-slot:[getTemplateName(header)]="slotProps"
    >
      <slot :name="getTemplateName(header)" v-bind="slotProps">
        {{ slotProps.item[header.value] }}
      </slot>
    </template>

    <template v-slot:item.action="slotProps">
      <slot name="item.action">
        <v-btn icon @click.stop="goTo(slotProps.item)" v-if="!slotProps.item._meta_.isDeleting">
          <v-icon>mdi-pencil-outline</v-icon>
        </v-btn>
        <v-btn icon @click.stop="showDeleteConfirm(slotProps.item)">
          <v-icon v-if="!slotProps.item._meta_.isDeleting">mdi-delete-outline</v-icon>
          <v-progress-circular
            v-if="slotProps.item._meta_.isDeleting"
            indeterminate
          ></v-progress-circular>
        </v-btn>
      </slot>
    </template>
  </v-data-table>

  <v-dialog persistent v-model="isDeleteConfirmVisible">
    <slot name="delete-dialog">
      <v-card>
        <v-card-title class="headline">
          {{ $t('core.common.deleteConfirmTitle') }}
        </v-card-title>
        <v-card-text>
          {{ deleteConfirmMsg(currentItem) }}
        </v-card-text>
        <v-divider></v-divider>
        <v-card-actions>
          <v-spacer></v-spacer>
          <v-btn color="primary" text @click.stop="dismissDeleteConfirm()">
            {{ $t('core.common.cancelBtnText') }}
          </v-btn>
          <v-btn color="error" text @click.stop="deleteItem(currentItem)">
            {{ $t('core.common.okBtnText') }}
          </v-btn>
        </v-card-actions>
      </v-card>
    </slot>
  </v-dialog>
</v-layout>
